<?xml version="1.0" encoding="utf-8" ?>
<project name="VersionPostRunner" default="go">

  <property name="build.config.settings" value="__NONE__" overwrite="false" />
  <include buildfile="${build.config.settings}" if="${file::exists(build.config.settings)}" />
  <property name="file.current.no_extension" value="versionBuilder" />
  <property name="dirs.current" value="${directory::get-parent-directory(project::get-buildfile-path())}" />
  <property name="path.to.toplevel" value=".." />
  <property name="folder.build_scripts" value="build" overwrite="false" />
  <property name="folder.build_scripts_custom" value="build.custom" overwrite="false" />
  <property name="dirs.build_scripts_custom" value="${dirs.current}\${path.to.toplevel}\${folder.build_scripts_custom}" />
  <property name="folder.code_build" value="build_output" overwrite="false" />
  <property name="dirs.build" value="${dirs.current}\${path.to.toplevel}\${folder.code_build}" />
  <property name="project.name" value="__SOLUTION_NAME_WITHOUT_SLN_EXTENSION__" overwrite="false" />
  <property name="company.name" value="__COMPANY_NAME__" overwrite="false" />
  <property name="path_to_solution" value="." overwrite="false" />
  <property name="language.short" value="cs" overwrite="false" />
  <property name="language.long" value="CSharp" />
  <property name="file.version" value="SolutionVersion.${language.short}" overwrite="false" />
  <property name="path.file.version" value="${dirs.current}\${path.to.toplevel}\${path_to_solution}\${file.version}" overwrite="false" />

  <target name="go" depends="move_sv" description="BeforeCompiling" />

  <target name="move_sv">
    <echo message="Moving and filtering ${file.version} to Properties\ directory"/>
    <move file="${path.file.version}" tofile="${dirs.current}\${path.to.toplevel}\${path_to_solution}\Properties\${file.version}">
      <filterchain>
				<replacestring from="[assembly" to="//[assembly" />
				<replacestring from="//[assembly: AssemblyVersionAttribute" to="[assembly: AssemblyVersionAttribute" />
				<replacestring from="//[assembly: AssemblyFileVersionAttribute" to="[assembly: AssemblyFileVersionAttribute" />
				<replacestring from="//[assembly: AssemblyInformationalVersionAttribute" to="[assembly: AssemblyInformationalVersionAttribute" />
      </filterchain>
    </move>
  </target>
  
</project>